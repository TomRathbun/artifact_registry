# Artifact Import/Export JSON Format

This document describes the JSON format for importing and exporting artifacts.

## General Structure

All export files follow this structure:

```json
{
  "artifactType": "vision|need|use_case|requirement",
  "projectId": "string",
  "exportDate": "ISO 8601 timestamp",
  "count": number,
  "artifacts": [...]
}
```

## Artifact Types

### Vision Statement

```json
{
  "title": "string (required)",
  "description": "string",
  "status": "proposed|draft|approved|active",
  "project_id": "string (auto-filled on import)"
}
```

**Example:**
```json
{
  "artifactType": "vision",
  "projectId": "proj-001",
  "exportDate": "2025-11-22T10:00:00Z",
  "count": 1,
  "artifacts": [
    {
      "title": "Modernize Customer Portal",
      "description": "Create a modern, responsive customer portal that improves user experience and reduces support costs",
      "status": "approved"
    }
  ]
}
```

### Need Statement

```json
{
  "title": "string (required)",
  "description": "string (required)",
  "rationale": "string",
  "status": "proposed|approved|implemented",
  "area": "MCK|IT|HR|FIN|OPS",
  "owner_id": "string (optional)",
  "stakeholder_id": "string (optional)",
  "source_vision_id": "string (optional)",
  "project_id": "string (auto-filled on import)"
}
```

**Example:**
```json
{
  "artifactType": "need",
  "projectId": "proj-001",
  "exportDate": "2025-11-22T10:00:00Z",
  "count": 1,
  "artifacts": [
    {
      "title": "Self-Service Password Reset",
      "description": "As a user, I need to reset my password without contacting IT, so that I can quickly regain access to my account",
      "rationale": "Reduces IT support burden and improves user satisfaction",
      "status": "approved",
      "area": "IT"
    }
  ]
}
```

### Use Case

```json
{
  "title": "string (required)",
  "description": "string",
  "trigger": "string",
  "scope": "string",
  "level": "string",
  "status": "proposed|approved|implemented",
  "area": "MCK|IT|HR|FIN|OPS",
  "primary_actor_id": "string (required)",
  "stakeholder_ids": ["string"],
  "precondition_ids": ["string"],
  "postcondition_ids": ["string"],
  "exception_ids": ["string"],
  "source_need_id": "string (optional)",
  "steps": [
    {
      "order": number,
      "actor": "string",
      "action": "string"
    }
  ],
  "extensions": [
    {
      "step": "string (e.g., '3a')",
      "condition": "string",
      "handling": "string"
    }
  ],
  "project_id": "string (auto-filled on import)"
}
```

**Example:**
```json
{
  "artifactType": "use_case",
  "projectId": "proj-001",
  "exportDate": "2025-11-22T10:00:00Z",
  "count": 1,
  "artifacts": [
    {
      "title": "Reset Password",
      "description": "User resets their forgotten password",
      "trigger": "User clicks 'Forgot Password' link",
      "scope": "System",
      "level": "User Goal",
      "status": "approved",
      "area": "IT",
      "primary_actor_id": "actor-user-001",
      "steps": [
        {
          "order": 1,
          "actor": "User",
          "action": "Enters email address"
        },
        {
          "order": 2,
          "actor": "System",
          "action": "Sends reset link to email"
        },
        {
          "order": 3,
          "actor": "User",
          "action": "Clicks reset link and enters new password"
        },
        {
          "order": 4,
          "actor": "System",
          "action": "Updates password and confirms success"
        }
      ],
      "extensions": [
        {
          "step": "2a",
          "condition": "Email not found in system",
          "handling": "Display generic message for security"
        }
      ]
    }
  ]
}
```

### Requirement

```json
{
  "short_name": "string (required)",
  "text": "string (required)",
  "status": "proposed|approved|implemented|verified",
  "area": "MCK|IT|HR|FIN|OPS",
  "owner_id": "string (optional)",
  "level": "system|subsystem|component",
  "ears_type": "ubiquitous|event|unwanted|state|optional",
  "source_use_case_id": "string (optional)",
  "project_id": "string (auto-filled on import)"
}
```

**Example:**
```json
{
  "artifactType": "requirement",
  "projectId": "proj-001",
  "exportDate": "2025-11-22T10:00:00Z",
  "count": 1,
  "artifacts": [
    {
      "short_name": "PWD-RESET-001",
      "text": "The system shall send a password reset email within 60 seconds of a valid reset request",
      "status": "approved",
      "area": "IT",
      "level": "system",
      "ears_type": "ubiquitous"
    }
  ]
}
```

## Import Notes

1. **IDs are auto-generated**: Don't include `id`, `aid`, `created_at`, or `updated_at` fields - they will be generated by the backend
2. **Project ID**: The `project_id` is automatically set to the current project during import
3. **References**: Foreign key references (like `source_vision_id`, `primary_actor_id`) must exist in the target project
4. **Validation**: The import process validates each artifact and reports success/failure counts
5. **Partial imports**: If some artifacts fail validation, others will still be imported

## Export Behavior

- **Filters applied**: Only artifacts matching current filters (search, area, status) are exported
- **Complete data**: All fields are exported, including IDs and timestamps
- **Filename**: Auto-generated as `{artifactType}_export_{date}.json`

## Tips

- Export from one project and import to another for templates
- Edit JSON files to bulk-create similar artifacts
- Use version control to track artifact changes over time
- Validate JSON structure before importing (use a JSON validator)
